language: java
jdk:
  - oraclejdk8
env:
  - TRAVIS_NODE_VERSION=6
addons:
  chrome: stable
install:
  - # start chrome headlessly
  - google-chrome-stable --headless --disable-gpu --remote-debugging-port=9222 http://localhost &
  - rm -rf ~/.nvm && git clone https://github.com/creationix/nvm.git ~/.nvm && (cd ~/.nvm && git checkout `git describe --abbrev=0 --tags`) && source ~/.nvm/nvm.sh && nvm install $TRAVIS_NODE_VERSION
  - npm i -g npm
  - npm cache verify
  - npm install
before_cache:
  - rm -f  $HOME/.gradle/caches/modules-2/modules-2.lock
  - rm -fr $HOME/.gradle/caches/*/plugin-resolution/
cache:
  directories:
    - $HOME/.gradle/caches/
    - $HOME/.gradle/wrapper/
deploy:
  provider: heroku
  api_key: $HEROKU_API_KEY
  app: mboyz-webapp-staging
notifications:
  email: false
